<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: QiniuNg::Streaming::Stream
  
    &mdash; Documentation by YARD 0.9.20
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "QiniuNg::Streaming::Stream";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Streaming.html" title="QiniuNg::Streaming (module)">Streaming</a></span></span>
     &raquo; 
    <span class="title">Stream</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: QiniuNg::Streaming::Stream
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">QiniuNg::Streaming::Stream</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/qiniu_ng/streaming/stream.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>七牛直播流</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Stream/Attributes.html" title="QiniuNg::Streaming::Stream::Attributes (class)">Attributes</a></span>, <span class='object_link'><a href="Stream/LiveInfo.html" title="QiniuNg::Streaming::Stream::LiveInfo (class)">LiveInfo</a></span>, <span class='object_link'><a href="Stream/SaveAsResult.html" title="QiniuNg::Streaming::Stream::SaveAsResult (class)">SaveAsResult</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#hub-instance_method" title="#hub (instance method)">#<strong>hub</strong>  &#x21d2; Hub </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>直播空间.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#key-instance_method" title="#key (instance method)">#<strong>key</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>直播流名称.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes-instance_method" title="#attributes (instance method)">#<strong>attributes</strong>(refresh: false, pili_url: nil, https: nil, **options)  &#x21d2; Attributes </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>获取直播流详细信息.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable-instance_method" title="#disable (instance method)">#<strong>disable</strong>(recover_until: -1,, pili_url: nil, https: nil, **options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>禁播流.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enable-instance_method" title="#enable (instance method)">#<strong>enable</strong>(pili_url: nil, https: nil, **options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>解除禁播流.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hdl_play_domain-instance_method" title="#hdl_play_domain (instance method)">#<strong>hdl_play_domain</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>HDL (HTTP-FLV) 播放域名.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hdl_play_url-instance_method" title="#hdl_play_url (instance method)">#<strong>hdl_play_url</strong>  &#x21d2; URL::PlayURL </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>HDL (HTTP-FLV) 播放地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#history_activities-instance_method" title="#history_activities (instance method)">#<strong>history_activities</strong>(from: nil, to: nil, pili_url: nil, https: nil, **options)  &#x21d2; Array&lt;Array&lt;Time&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>获取直播历史记录.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hls_play_domain-instance_method" title="#hls_play_domain (instance method)">#<strong>hls_play_domain</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>HLS 播放域名.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hls_play_url-instance_method" title="#hls_play_url (instance method)">#<strong>hls_play_url</strong>  &#x21d2; URL::PlayURL </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>HLS 播放地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#live_info-instance_method" title="#live_info (instance method)">#<strong>live_info</strong>(pili_url: nil, https: nil, **options)  &#x21d2; LiveInfo<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>获取直播流实时信息.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rtmp_play_domain-instance_method" title="#rtmp_play_domain (instance method)">#<strong>rtmp_play_domain</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RTMP 播放域名.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rtmp_play_url-instance_method" title="#rtmp_play_url (instance method)">#<strong>rtmp_play_url</strong>  &#x21d2; PlayURL </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RTMP 播放地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rtmp_publish_domain-instance_method" title="#rtmp_publish_domain (instance method)">#<strong>rtmp_publish_domain</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RTMP 推流域名.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rtmp_publish_url-instance_method" title="#rtmp_publish_url (instance method)">#<strong>rtmp_publish_url</strong>  &#x21d2; URL::RTMPPublishURL </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>RTMP 推流地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_as-instance_method" title="#save_as (instance method)">#<strong>save_as</strong>(key: nil, from: nil, to: nil, format: :m3u8, pipeline: nil, notify_url: nil, expire_after_days: nil, pili_url: nil, https: nil, **options)  &#x21d2; SaveAsResult </a>
    

    
      (also: #saveas)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>录制直播回放.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#snapshot-instance_method" title="#snapshot (instance method)">#<strong>snapshot</strong>(key: nil, time: nil, format: :jpg, expire_after_days: nil, delete_after_days: nil, pili_url: nil, https: nil, **options)  &#x21d2; QiniuNg::Storage::Entry </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>保存直播截图.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#snapshot_domain-instance_method" title="#snapshot_domain (instance method)">#<strong>snapshot_domain</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>直播封面域名.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#snapshot_url-instance_method" title="#snapshot_url (instance method)">#<strong>snapshot_url</strong>  &#x21d2; URL::PlayURL </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>直播封面地址.</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="hub-instance_method">
  
    #<strong>hub</strong>  &#x21d2; <tt><span class='object_link'><a href="Hub.html" title="QiniuNg::Streaming::Hub (class)">Hub</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns 直播空间</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hub.html" title="QiniuNg::Streaming::Hub (class)">Hub</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>直播空间</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 13</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="QiniuNg::Streaming::Stream (class)">Stream</a></span></span>
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:hub</span><span class='comma'>,</span> <span class='symbol'>:key</span>
  <span class='comment'># @!visibility private
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_key'>stream_key</span><span class='comma'>,</span> <span class='id identifier rubyid_hub'>hub</span><span class='comma'>,</span> <span class='id identifier rubyid_http_client_v2'>http_client_v2</span><span class='comma'>,</span> <span class='id identifier rubyid_auth'>auth</span><span class='comma'>,</span> <span class='id identifier rubyid_domain'>domain</span><span class='comma'>,</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='rparen'>)</span>
    <span class='ivar'>@key</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_key'>stream_key</span>
    <span class='ivar'>@hub</span> <span class='op'>=</span> <span class='id identifier rubyid_hub'>hub</span>
    <span class='ivar'>@http_client_v2</span> <span class='op'>=</span> <span class='id identifier rubyid_http_client_v2'>http_client_v2</span>
    <span class='ivar'>@auth</span> <span class='op'>=</span> <span class='id identifier rubyid_auth'>auth</span>
    <span class='ivar'>@domain</span> <span class='op'>=</span> <span class='id identifier rubyid_domain'>domain</span>
    <span class='ivar'>@bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span>
  <span class='kw'>end</span>

  <span class='comment'># 获取直播流详细信息
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [Boolean] refresh 是否强制刷新缓存。如果为 false 或不填写，则尽量使用缓存中的数据
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @return [Attributes] 返回直播流详细信息
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='lparen'>(</span><span class='label'>refresh:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_refresh'>refresh</span>
    <span class='ivar'>@attributes</span> <span class='op'>||=</span> <span class='kw'>begin</span>
                      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                      <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
                      <span class='const'><span class='object_link'><a href="Stream/Attributes.html" title="QiniuNg::Streaming::Stream::Attributes (class)">Attributes</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='rparen'>)</span>
                    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># 直播流详细信息
</span>  <span class='comment'># @!attribute [r] created_at
</span>  <span class='comment'>#   @return [Time] 直播流创建时间
</span>  <span class='comment'># @!attribute [r] updated_at
</span>  <span class='comment'>#   @return [Time] 直播流修改时间
</span>  <span class='comment'># @!attribute [r] expire_at
</span>  <span class='comment'>#   @return [Time] 直播流过期时间
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Stream/Attributes.html" title="QiniuNg::Streaming::Stream::Attributes (class)">Attributes</a></span></span>
    <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:created_at</span><span class='comma'>,</span> <span class='symbol'>:updated_at</span><span class='comma'>,</span> <span class='symbol'>:expire_at</span>

    <span class='comment'># @!visibility private
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span>
      <span class='ivar'>@created_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createdAt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='ivar'>@updated_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>updatedAt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='ivar'>@expire_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>expireAt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='ivar'>@disabled_till</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabledTill</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='comment'># 直播流解禁时间
</span>    <span class='comment'>#
</span>    <span class='comment'># @return [Time, nil] 返回直播流解禁时间。如果直播流并未被禁播，则返回 nil
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_disabled_until'>disabled_until</span>
      <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='ivar'>@disabled_till</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@disabled_till</span><span class='period'>.</span><span class='id identifier rubyid_positive?'>positive?</span>
    <span class='kw'>end</span>

    <span class='comment'># 直播流是否已经禁用
</span>    <span class='comment'>#
</span>    <span class='comment'># @return [Boolean] 返回是否已经禁用
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_disabled?'>disabled?</span>
      <span class='op'>!</span><span class='id identifier rubyid_enabled?'>enabled?</span>
    <span class='kw'>end</span>

    <span class='comment'># 直播流是否未被禁用
</span>    <span class='comment'>#
</span>    <span class='comment'># @return [Boolean] 返回是否未被禁用
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_enabled?'>enabled?</span>
      <span class='ivar'>@disabled_till</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>
    <span class='kw'>end</span>

    <span class='comment'># 直播流是否被永久禁用
</span>    <span class='comment'>#
</span>    <span class='comment'># @return [Boolean] 直播流是否被永久禁用
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_disabled_forever?'>disabled_forever?</span>
      <span class='ivar'>@disabled_till</span><span class='period'>.</span><span class='id identifier rubyid_negative?'>negative?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># 解除禁播流
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_enable'>enable</span><span class='lparen'>(</span><span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_disable'>disable</span><span class='lparen'>(</span><span class='label'>recover_until:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='id identifier rubyid_pili_url'>pili_url</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='id identifier rubyid_https'>https</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># 禁播流
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_disable'>disable</span><span class='lparen'>(</span><span class='label'>recover_until:</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/disabled</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                         <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                         <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='label'>disabledTill:</span> <span class='id identifier rubyid_recover_until'>recover_until</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span><span class='comma'>,</span>
                         <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='comment'># 获取直播流实时信息
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @return [LiveInfo, nil] 返回直播流实时信息，如果该直播流并未处于直播状态，则返回 nil
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_live_info'>live_info</span><span class='lparen'>(</span><span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/live</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='const'><span class='object_link'><a href="Stream/LiveInfo.html" title="QiniuNg::Streaming::Stream::LiveInfo (class)">LiveInfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../HTTP.html" title="QiniuNg::HTTP (module)">HTTP</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../HTTP/NoData.html" title="QiniuNg::HTTP::NoData (class)">NoData</a></span></span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='comment'># 直播实时信息
</span>  <span class='comment'># @!attribute [r] started_at
</span>  <span class='comment'>#   @return [Time] 直播流开始直播时间
</span>  <span class='comment'># @!attribute [r] client_ip
</span>  <span class='comment'>#   @return [String] 主播的 IP 地址
</span>  <span class='comment'># @!attribute [r] bps
</span>  <span class='comment'>#   @return [Integer] 当前码率
</span>  <span class='comment'># @!attribute [r] fps
</span>  <span class='comment'>#   @return [LiveInfo::FPS] 返回帧率信息
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Stream/LiveInfo.html" title="QiniuNg::Streaming::Stream::LiveInfo (class)">LiveInfo</a></span></span>
    <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:started_at</span><span class='comma'>,</span> <span class='symbol'>:client_ip</span><span class='comma'>,</span> <span class='symbol'>:bps</span><span class='comma'>,</span> <span class='symbol'>:fps</span>

    <span class='comment'># @!visibility private
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span>
      <span class='ivar'>@started_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>startAt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
      <span class='ivar'>@client_ip</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>clientIP</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
      <span class='ivar'>@bps</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bps</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
      <span class='ivar'>@fps</span> <span class='op'>=</span> <span class='const'>FPS</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fps</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
    <span class='kw'>end</span>

    <span class='comment'># 帧率信息
</span>    <span class='comment'># @!attribute [r] audio
</span>    <span class='comment'>#   @return [Integer] 音频帧率
</span>    <span class='comment'># @!attribute [r] video
</span>    <span class='comment'>#   @return [Integer] 视频帧率
</span>    <span class='comment'># @!attribute [r] data
</span>    <span class='comment'>#   @return [Integer] 数据帧率
</span>    <span class='kw'>class</span> <span class='const'>FPS</span>
      <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:audio</span><span class='comma'>,</span> <span class='symbol'>:video</span><span class='comma'>,</span> <span class='symbol'>:data</span>

      <span class='comment'># @!visibility private
</span>      <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span>
        <span class='ivar'>@audio</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>audio</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='ivar'>@video</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>video</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='ivar'>@data</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># 获取直播历史记录
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [Time] from 查询起始时间，如果为 nil 或不填，则表示不限制起始时间
</span>  <span class='comment'># @param [Time] to 查询结束时间，如果为 nil 或不填，则表示当前时间
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @return [Array&lt;Array&lt;Time&gt;&gt;] 返回一个列表，每个列表中包含一个仅有两个时间的数组，分别表示直播起始时间和结束时间。
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_history_activities'>history_activities</span><span class='lparen'>(</span><span class='label'>from:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/historyactivity</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_from'>from</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='id identifier rubyid_from'>from</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>&amp;.</span><span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>end</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='id identifier rubyid_to'>to</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>&amp;.</span><span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>params:</span> <span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>items</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>end</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>end</span>

  <span class='comment'># 录制直播回放
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] key 保存的文件名，不指定系统会随机生成
</span>  <span class='comment'># @param [Time] from 要保存的直播的起始时间，如果为 nil 或不填，则表示不限制起始时间
</span>  <span class='comment'># @param [Time] to 要保存的直播的结束时间，如果为 nil 或不填，则表示当前时间
</span>  <span class='comment'># @param [Symbol, String] format 保存的文件格式，默认为 m3u8，如果需要指定其他格式，将会启用异步处理
</span>  <span class='comment'># @param [String] pipeline 当使用异步处理时，使用的数据处理私有队列名称
</span>  <span class='comment'>#   {参考文档}[https://developer.qiniu.com/kodo/manual/1206/put-policy#put-policy-persistentPipeline]
</span>  <span class='comment'># @param [String] notify_url 当使用异步处理时，保存成功回调通知地址
</span>  <span class='comment'>#   {参考文档}[https://developer.qiniu.com/kodo/manual/1206/put-policy#putpolicy-persistentNotifyUrl]
</span>  <span class='comment'># @param [Integer] expire_after_days 文件生命周期，单位为天。默认永久保存
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @raise [QiniuNg::HTTP::NoData] 该时间点上没有直播数据
</span>  <span class='comment'># @return [SaveAsResult] 返回录制结果
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_save_as'>save_as</span><span class='lparen'>(</span><span class='label'>key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>from:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:m3u8</span><span class='comma'>,</span>
              <span class='label'>pipeline:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>notify_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>expire_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span>
              <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/saveas</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_req_body'>req_body</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>fname:</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>start:</span> <span class='id identifier rubyid_from'>from</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='id identifier rubyid_to'>to</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span>
      <span class='label'>pipeline:</span> <span class='id identifier rubyid_pipeline'>pipeline</span><span class='comma'>,</span> <span class='label'>notify:</span> <span class='id identifier rubyid_notify_url'>notify_url</span><span class='comma'>,</span> <span class='label'>expireDays:</span> <span class='id identifier rubyid_expire_after_days'>expire_after_days</span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                                     <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                     <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req_body'>req_body</span><span class='rparen'>)</span><span class='comma'>,</span>
                                     <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='const'><span class='object_link'><a href="Stream/SaveAsResult.html" title="QiniuNg::Streaming::Stream::SaveAsResult (class)">SaveAsResult</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_entry'>entry</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fname</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='const'><span class='object_link'><a href="../Processing.html" title="QiniuNg::Processing (module)">Processing</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Processing/PersistentID.html" title="QiniuNg::Processing::PersistentID (class)">PersistentID</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>persistentID</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                                   <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@http_client_v1</span><span class='rparen'>)</span><span class='comma'>,</span>
                                   <span class='ivar'>@bucket</span><span class='rparen'>)</span>
    <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>end</span>
  <span class='kw'>alias</span> <span class='id identifier rubyid_saveas'>saveas</span> <span class='id identifier rubyid_save_as'>save_as</span>

  <span class='comment'># 录制直播回放结果
</span>  <span class='comment'>#
</span>  <span class='comment'># @!attribute [r] entry
</span>  <span class='comment'>#   @return [QiniuNg::Storage::Entry] 保存后在存储空间里的文件名
</span>  <span class='comment'># @!attribute [r] persistent_id
</span>  <span class='comment'>#   @return [QiniuNg::Processing::PersistentID] 持久化异步处理任务 ID
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Stream/SaveAsResult.html" title="QiniuNg::Streaming::Stream::SaveAsResult (class)">SaveAsResult</a></span></span>
    <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:entry</span><span class='comma'>,</span> <span class='symbol'>:persistent_id</span>

    <span class='comment'># @!visibility private
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_persistent_id'>persistent_id</span><span class='rparen'>)</span>
      <span class='ivar'>@entry</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span>
      <span class='ivar'>@persistent_id</span> <span class='op'>=</span> <span class='id identifier rubyid_persistent_id'>persistent_id</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># 保存直播截图
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] key 保存的文件名，不指定系统会随机生成
</span>  <span class='comment'># @param [Time] time 要保存截图的时间点，如果为 nil 或不填，则表示不限制起始时间
</span>  <span class='comment'># @param [String, Symbol] format 要保存的文件格式，默认为 JPG
</span>  <span class='comment'># @param [Integer] expire_after_days 文件生命周期，单位为天。默认永久保存
</span>  <span class='comment'># @param [Integer] delete_after_days 与 expire_after_days 语义相同。仅使用任意一个参数即可，不必同时使用
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @raise [Faraday::ClientError] 该时间点上没有视频
</span>  <span class='comment'># @return [QiniuNg::Storage::Entry] 返回录制结果文件
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_snapshot'>snapshot</span><span class='lparen'>(</span><span class='label'>key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>time:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:jpg</span><span class='comma'>,</span> <span class='label'>expire_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>delete_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/snapshot</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_req_body'>req_body</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>fname:</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>time:</span> <span class='id identifier rubyid_time'>time</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span> <span class='label'>deleteAfterDays:</span> <span class='id identifier rubyid_delete_after_days'>delete_after_days</span> <span class='op'>||</span> <span class='id identifier rubyid_expire_after_days'>expire_after_days</span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                                     <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                     <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req_body'>req_body</span><span class='rparen'>)</span><span class='comma'>,</span>
                                     <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_entry'>entry</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fname</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># RTMP 推流域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] RTMP 推流域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_rtmp_publish_domain'>rtmp_publish_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-publish.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># RTMP 播放域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] RTMP 播放域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_rtmp_play_domain'>rtmp_play_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-rtmp.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># HLS 播放域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] HLS 播放域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_hls_play_domain'>hls_play_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-hls.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># HDL (HTTP-FLV) 播放域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] HDL (HTTP-FLV) 播放域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_hdl_play_domain'>hdl_play_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-hdl.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># 直播封面域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] 直播封面域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_snapshot_domain'>snapshot_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-snapshot.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># RTMP 推流地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @example
</span>  <span class='comment'>#   client = QiniuNg.new_client(access_key: &#39;&lt;Qiniu AccessKey&gt;&#39;, secret_key: &#39;&lt;Qiniu SecretKey&gt;&#39;)
</span>  <span class='comment'>#   url = client.hub(&#39;&lt;Hub Name&gt;&#39;, domain: &#39;&lt;Hub Domain&gt;&#39;).stream(&#39;&lt;Stream Key&gt;&#39;).rtmp_publish_url
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [URL::RTMPPublishURL] RTMP 推流地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_rtmp_publish_url'>rtmp_publish_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/RTMPPublishURL.html" title="QiniuNg::Streaming::URL::RTMPPublishURL (class)">RTMPPublishURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_rtmp_publish_domain'>rtmp_publish_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='ivar'>@key</span><span class='comma'>,</span> <span class='ivar'>@auth</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># RTMP 播放地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [PlayURL] RTMP 播放地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_rtmp_play_url'>rtmp_play_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rtmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_rtmp_play_domain'>rtmp_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='ivar'>@key</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># HLS 播放地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [URL::PlayURL] HLS 播放地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_hls_play_url'>hls_play_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_hls_play_domain'>hls_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.m3u8</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># HDL (HTTP-FLV) 播放地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [URL::PlayURL] HDL (HTTP-FLV) 播放地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_hdl_play_url'>hdl_play_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_hdl_play_domain'>hdl_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.flv</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># 直播封面地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [URL::PlayURL] 直播封面地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_snapshot_url'>snapshot_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_snapshot_domain'>snapshot_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.jpg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># @!visibility private
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> @key=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> hub.name=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../Common.html" title="QiniuNg::Common (module)">Common</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Common/Zone.html" title="QiniuNg::Common::Zone (class)">Zone</a></span></span><span class='period'>.</span><span class='id identifier rubyid_pili_url'>pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="key-instance_method">
  
    #<strong>key</strong>  &#x21d2; <tt>String</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns 直播流名称</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>直播流名称</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 13</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="QiniuNg::Streaming::Stream (class)">Stream</a></span></span>
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:hub</span><span class='comma'>,</span> <span class='symbol'>:key</span>
  <span class='comment'># @!visibility private
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_stream_key'>stream_key</span><span class='comma'>,</span> <span class='id identifier rubyid_hub'>hub</span><span class='comma'>,</span> <span class='id identifier rubyid_http_client_v2'>http_client_v2</span><span class='comma'>,</span> <span class='id identifier rubyid_auth'>auth</span><span class='comma'>,</span> <span class='id identifier rubyid_domain'>domain</span><span class='comma'>,</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='rparen'>)</span>
    <span class='ivar'>@key</span> <span class='op'>=</span> <span class='id identifier rubyid_stream_key'>stream_key</span>
    <span class='ivar'>@hub</span> <span class='op'>=</span> <span class='id identifier rubyid_hub'>hub</span>
    <span class='ivar'>@http_client_v2</span> <span class='op'>=</span> <span class='id identifier rubyid_http_client_v2'>http_client_v2</span>
    <span class='ivar'>@auth</span> <span class='op'>=</span> <span class='id identifier rubyid_auth'>auth</span>
    <span class='ivar'>@domain</span> <span class='op'>=</span> <span class='id identifier rubyid_domain'>domain</span>
    <span class='ivar'>@bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span>
  <span class='kw'>end</span>

  <span class='comment'># 获取直播流详细信息
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [Boolean] refresh 是否强制刷新缓存。如果为 false 或不填写，则尽量使用缓存中的数据
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @return [Attributes] 返回直播流详细信息
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='lparen'>(</span><span class='label'>refresh:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_refresh'>refresh</span>
    <span class='ivar'>@attributes</span> <span class='op'>||=</span> <span class='kw'>begin</span>
                      <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                      <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
                      <span class='const'><span class='object_link'><a href="Stream/Attributes.html" title="QiniuNg::Streaming::Stream::Attributes (class)">Attributes</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='rparen'>)</span>
                    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># 直播流详细信息
</span>  <span class='comment'># @!attribute [r] created_at
</span>  <span class='comment'>#   @return [Time] 直播流创建时间
</span>  <span class='comment'># @!attribute [r] updated_at
</span>  <span class='comment'>#   @return [Time] 直播流修改时间
</span>  <span class='comment'># @!attribute [r] expire_at
</span>  <span class='comment'>#   @return [Time] 直播流过期时间
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Stream/Attributes.html" title="QiniuNg::Streaming::Stream::Attributes (class)">Attributes</a></span></span>
    <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:created_at</span><span class='comma'>,</span> <span class='symbol'>:updated_at</span><span class='comma'>,</span> <span class='symbol'>:expire_at</span>

    <span class='comment'># @!visibility private
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span>
      <span class='ivar'>@created_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>createdAt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='ivar'>@updated_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>updatedAt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='ivar'>@expire_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>expireAt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='ivar'>@disabled_till</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabledTill</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='comment'># 直播流解禁时间
</span>    <span class='comment'>#
</span>    <span class='comment'># @return [Time, nil] 返回直播流解禁时间。如果直播流并未被禁播，则返回 nil
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_disabled_until'>disabled_until</span>
      <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='ivar'>@disabled_till</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@disabled_till</span><span class='period'>.</span><span class='id identifier rubyid_positive?'>positive?</span>
    <span class='kw'>end</span>

    <span class='comment'># 直播流是否已经禁用
</span>    <span class='comment'>#
</span>    <span class='comment'># @return [Boolean] 返回是否已经禁用
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_disabled?'>disabled?</span>
      <span class='op'>!</span><span class='id identifier rubyid_enabled?'>enabled?</span>
    <span class='kw'>end</span>

    <span class='comment'># 直播流是否未被禁用
</span>    <span class='comment'>#
</span>    <span class='comment'># @return [Boolean] 返回是否未被禁用
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_enabled?'>enabled?</span>
      <span class='ivar'>@disabled_till</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>
    <span class='kw'>end</span>

    <span class='comment'># 直播流是否被永久禁用
</span>    <span class='comment'>#
</span>    <span class='comment'># @return [Boolean] 直播流是否被永久禁用
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_disabled_forever?'>disabled_forever?</span>
      <span class='ivar'>@disabled_till</span><span class='period'>.</span><span class='id identifier rubyid_negative?'>negative?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># 解除禁播流
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_enable'>enable</span><span class='lparen'>(</span><span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_disable'>disable</span><span class='lparen'>(</span><span class='label'>recover_until:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='id identifier rubyid_pili_url'>pili_url</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='id identifier rubyid_https'>https</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># 禁播流
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_disable'>disable</span><span class='lparen'>(</span><span class='label'>recover_until:</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/disabled</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                         <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                         <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='label'>disabledTill:</span> <span class='id identifier rubyid_recover_until'>recover_until</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span><span class='comma'>,</span>
                         <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='comment'># 获取直播流实时信息
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @return [LiveInfo, nil] 返回直播流实时信息，如果该直播流并未处于直播状态，则返回 nil
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_live_info'>live_info</span><span class='lparen'>(</span><span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/live</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='const'><span class='object_link'><a href="Stream/LiveInfo.html" title="QiniuNg::Streaming::Stream::LiveInfo (class)">LiveInfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../HTTP.html" title="QiniuNg::HTTP (module)">HTTP</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../HTTP/NoData.html" title="QiniuNg::HTTP::NoData (class)">NoData</a></span></span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='comment'># 直播实时信息
</span>  <span class='comment'># @!attribute [r] started_at
</span>  <span class='comment'>#   @return [Time] 直播流开始直播时间
</span>  <span class='comment'># @!attribute [r] client_ip
</span>  <span class='comment'>#   @return [String] 主播的 IP 地址
</span>  <span class='comment'># @!attribute [r] bps
</span>  <span class='comment'>#   @return [Integer] 当前码率
</span>  <span class='comment'># @!attribute [r] fps
</span>  <span class='comment'>#   @return [LiveInfo::FPS] 返回帧率信息
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Stream/LiveInfo.html" title="QiniuNg::Streaming::Stream::LiveInfo (class)">LiveInfo</a></span></span>
    <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:started_at</span><span class='comma'>,</span> <span class='symbol'>:client_ip</span><span class='comma'>,</span> <span class='symbol'>:bps</span><span class='comma'>,</span> <span class='symbol'>:fps</span>

    <span class='comment'># @!visibility private
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span>
      <span class='ivar'>@started_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>startAt</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
      <span class='ivar'>@client_ip</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>clientIP</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
      <span class='ivar'>@bps</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bps</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
      <span class='ivar'>@fps</span> <span class='op'>=</span> <span class='const'>FPS</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fps</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
    <span class='kw'>end</span>

    <span class='comment'># 帧率信息
</span>    <span class='comment'># @!attribute [r] audio
</span>    <span class='comment'>#   @return [Integer] 音频帧率
</span>    <span class='comment'># @!attribute [r] video
</span>    <span class='comment'>#   @return [Integer] 视频帧率
</span>    <span class='comment'># @!attribute [r] data
</span>    <span class='comment'>#   @return [Integer] 数据帧率
</span>    <span class='kw'>class</span> <span class='const'>FPS</span>
      <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:audio</span><span class='comma'>,</span> <span class='symbol'>:video</span><span class='comma'>,</span> <span class='symbol'>:data</span>

      <span class='comment'># @!visibility private
</span>      <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span>
        <span class='ivar'>@audio</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>audio</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='ivar'>@video</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>video</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='ivar'>@data</span> <span class='op'>=</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># 获取直播历史记录
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [Time] from 查询起始时间，如果为 nil 或不填，则表示不限制起始时间
</span>  <span class='comment'># @param [Time] to 查询结束时间，如果为 nil 或不填，则表示当前时间
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @return [Array&lt;Array&lt;Time&gt;&gt;] 返回一个列表，每个列表中包含一个仅有两个时间的数组，分别表示直播起始时间和结束时间。
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_history_activities'>history_activities</span><span class='lparen'>(</span><span class='label'>from:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/historyactivity</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_from'>from</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='id identifier rubyid_from'>from</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>&amp;.</span><span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>end</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='id identifier rubyid_to'>to</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>&amp;.</span><span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>params:</span> <span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>items</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>end</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>end</span>

  <span class='comment'># 录制直播回放
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] key 保存的文件名，不指定系统会随机生成
</span>  <span class='comment'># @param [Time] from 要保存的直播的起始时间，如果为 nil 或不填，则表示不限制起始时间
</span>  <span class='comment'># @param [Time] to 要保存的直播的结束时间，如果为 nil 或不填，则表示当前时间
</span>  <span class='comment'># @param [Symbol, String] format 保存的文件格式，默认为 m3u8，如果需要指定其他格式，将会启用异步处理
</span>  <span class='comment'># @param [String] pipeline 当使用异步处理时，使用的数据处理私有队列名称
</span>  <span class='comment'>#   {参考文档}[https://developer.qiniu.com/kodo/manual/1206/put-policy#put-policy-persistentPipeline]
</span>  <span class='comment'># @param [String] notify_url 当使用异步处理时，保存成功回调通知地址
</span>  <span class='comment'>#   {参考文档}[https://developer.qiniu.com/kodo/manual/1206/put-policy#putpolicy-persistentNotifyUrl]
</span>  <span class='comment'># @param [Integer] expire_after_days 文件生命周期，单位为天。默认永久保存
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @raise [QiniuNg::HTTP::NoData] 该时间点上没有直播数据
</span>  <span class='comment'># @return [SaveAsResult] 返回录制结果
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_save_as'>save_as</span><span class='lparen'>(</span><span class='label'>key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>from:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:m3u8</span><span class='comma'>,</span>
              <span class='label'>pipeline:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>notify_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>expire_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span>
              <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/saveas</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_req_body'>req_body</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>fname:</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>start:</span> <span class='id identifier rubyid_from'>from</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='id identifier rubyid_to'>to</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span>
      <span class='label'>pipeline:</span> <span class='id identifier rubyid_pipeline'>pipeline</span><span class='comma'>,</span> <span class='label'>notify:</span> <span class='id identifier rubyid_notify_url'>notify_url</span><span class='comma'>,</span> <span class='label'>expireDays:</span> <span class='id identifier rubyid_expire_after_days'>expire_after_days</span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                                     <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                     <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req_body'>req_body</span><span class='rparen'>)</span><span class='comma'>,</span>
                                     <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='const'><span class='object_link'><a href="Stream/SaveAsResult.html" title="QiniuNg::Streaming::Stream::SaveAsResult (class)">SaveAsResult</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_entry'>entry</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fname</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='const'><span class='object_link'><a href="../Processing.html" title="QiniuNg::Processing (module)">Processing</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Processing/PersistentID.html" title="QiniuNg::Processing::PersistentID (class)">PersistentID</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>persistentID</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                                   <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@http_client_v1</span><span class='rparen'>)</span><span class='comma'>,</span>
                                   <span class='ivar'>@bucket</span><span class='rparen'>)</span>
    <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
  <span class='kw'>end</span>
  <span class='kw'>alias</span> <span class='id identifier rubyid_saveas'>saveas</span> <span class='id identifier rubyid_save_as'>save_as</span>

  <span class='comment'># 录制直播回放结果
</span>  <span class='comment'>#
</span>  <span class='comment'># @!attribute [r] entry
</span>  <span class='comment'>#   @return [QiniuNg::Storage::Entry] 保存后在存储空间里的文件名
</span>  <span class='comment'># @!attribute [r] persistent_id
</span>  <span class='comment'>#   @return [QiniuNg::Processing::PersistentID] 持久化异步处理任务 ID
</span>  <span class='kw'>class</span> <span class='const'><span class='object_link'><a href="Stream/SaveAsResult.html" title="QiniuNg::Streaming::Stream::SaveAsResult (class)">SaveAsResult</a></span></span>
    <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:entry</span><span class='comma'>,</span> <span class='symbol'>:persistent_id</span>

    <span class='comment'># @!visibility private
</span>    <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_persistent_id'>persistent_id</span><span class='rparen'>)</span>
      <span class='ivar'>@entry</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span>
      <span class='ivar'>@persistent_id</span> <span class='op'>=</span> <span class='id identifier rubyid_persistent_id'>persistent_id</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># 保存直播截图
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [String] key 保存的文件名，不指定系统会随机生成
</span>  <span class='comment'># @param [Time] time 要保存截图的时间点，如果为 nil 或不填，则表示不限制起始时间
</span>  <span class='comment'># @param [String, Symbol] format 要保存的文件格式，默认为 JPG
</span>  <span class='comment'># @param [Integer] expire_after_days 文件生命周期，单位为天。默认永久保存
</span>  <span class='comment'># @param [Integer] delete_after_days 与 expire_after_days 语义相同。仅使用任意一个参数即可，不必同时使用
</span>  <span class='comment'># @param [String] pili_url Pili 所在服务器地址，一般无需填写
</span>  <span class='comment'># @param [Boolean] https 是否使用 HTTPS 协议
</span>  <span class='comment'># @param [Hash] options 额外的 Faraday 参数
</span>  <span class='comment'># @raise [QiniuNg::HTTP::ResourceNotFound] 找不到直播流
</span>  <span class='comment'># @raise [Faraday::ClientError] 该时间点上没有视频
</span>  <span class='comment'># @return [QiniuNg::Storage::Entry] 返回录制结果文件
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_snapshot'>snapshot</span><span class='lparen'>(</span><span class='label'>key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>time:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:jpg</span><span class='comma'>,</span> <span class='label'>expire_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>delete_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/snapshot</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_req_body'>req_body</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>fname:</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>time:</span> <span class='id identifier rubyid_time'>time</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span> <span class='label'>deleteAfterDays:</span> <span class='id identifier rubyid_delete_after_days'>delete_after_days</span> <span class='op'>||</span> <span class='id identifier rubyid_expire_after_days'>expire_after_days</span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                                     <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                     <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req_body'>req_body</span><span class='rparen'>)</span><span class='comma'>,</span>
                                     <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
    <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_entry'>entry</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fname</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># RTMP 推流域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] RTMP 推流域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_rtmp_publish_domain'>rtmp_publish_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-publish.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># RTMP 播放域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] RTMP 播放域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_rtmp_play_domain'>rtmp_play_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-rtmp.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># HLS 播放域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] HLS 播放域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_hls_play_domain'>hls_play_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-hls.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># HDL (HTTP-FLV) 播放域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] HDL (HTTP-FLV) 播放域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_hdl_play_domain'>hdl_play_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-hdl.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># 直播封面域名
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String] 直播封面域名
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_snapshot_domain'>snapshot_domain</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-snapshot.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># RTMP 推流地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @example
</span>  <span class='comment'>#   client = QiniuNg.new_client(access_key: &#39;&lt;Qiniu AccessKey&gt;&#39;, secret_key: &#39;&lt;Qiniu SecretKey&gt;&#39;)
</span>  <span class='comment'>#   url = client.hub(&#39;&lt;Hub Name&gt;&#39;, domain: &#39;&lt;Hub Domain&gt;&#39;).stream(&#39;&lt;Stream Key&gt;&#39;).rtmp_publish_url
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [URL::RTMPPublishURL] RTMP 推流地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_rtmp_publish_url'>rtmp_publish_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/RTMPPublishURL.html" title="QiniuNg::Streaming::URL::RTMPPublishURL (class)">RTMPPublishURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_rtmp_publish_domain'>rtmp_publish_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='ivar'>@key</span><span class='comma'>,</span> <span class='ivar'>@auth</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># RTMP 播放地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [PlayURL] RTMP 播放地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_rtmp_play_url'>rtmp_play_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rtmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_rtmp_play_domain'>rtmp_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='ivar'>@key</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># HLS 播放地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [URL::PlayURL] HLS 播放地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_hls_play_url'>hls_play_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_hls_play_domain'>hls_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.m3u8</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># HDL (HTTP-FLV) 播放地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [URL::PlayURL] HDL (HTTP-FLV) 播放地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_hdl_play_url'>hdl_play_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_hdl_play_domain'>hdl_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.flv</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># 直播封面地址
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [URL::PlayURL] 直播封面地址
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_snapshot_url'>snapshot_url</span>
    <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_snapshot_domain'>snapshot_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.jpg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># @!visibility private
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> @key=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> hub.name=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="../Common.html" title="QiniuNg::Common (module)">Common</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Common/Zone.html" title="QiniuNg::Common::Zone (class)">Zone</a></span></span><span class='period'>.</span><span class='id identifier rubyid_pili_url'>pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="attributes-instance_method">
  
    #<strong>attributes</strong>(refresh: false, pili_url: nil, https: nil, **options)  &#x21d2; <tt><span class='object_link'><a href="Stream/Attributes.html" title="QiniuNg::Streaming::Stream::Attributes (class)">Attributes</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>获取直播流详细信息</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>refresh</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否强制刷新缓存。如果为 false 或不填写，则尽量使用缓存中的数据</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pili_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pili 所在服务器地址，一般无需填写</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>https</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否使用 HTTPS 协议</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>额外的 Faraday 参数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Stream/Attributes.html" title="QiniuNg::Streaming::Stream::Attributes (class)">Attributes</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回直播流详细信息</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/ResourceNotFound.html" title="QiniuNg::HTTP::ResourceNotFound (class)">QiniuNg::HTTP::ResourceNotFound</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>找不到直播流</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attributes'>attributes</span><span class='lparen'>(</span><span class='label'>refresh:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_refresh'>refresh</span>
  <span class='ivar'>@attributes</span> <span class='op'>||=</span> <span class='kw'>begin</span>
                    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                    <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
                    <span class='const'><span class='object_link'><a href="Stream/Attributes.html" title="QiniuNg::Streaming::Stream::Attributes (class)">Attributes</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='rparen'>)</span>
                  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disable-instance_method">
  
    #<strong>disable</strong>(recover_until: -1,, pili_url: nil, https: nil, **options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>禁播流</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pili_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pili 所在服务器地址，一般无需填写</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>https</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否使用 HTTPS 协议</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>额外的 Faraday 参数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/ResourceNotFound.html" title="QiniuNg::HTTP::ResourceNotFound (class)">QiniuNg::HTTP::ResourceNotFound</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>找不到直播流</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107
108
109
110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disable'>disable</span><span class='lparen'>(</span><span class='label'>recover_until:</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/disabled</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                       <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                       <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='label'>disabledTill:</span> <span class='id identifier rubyid_recover_until'>recover_until</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span><span class='comma'>,</span>
                       <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enable-instance_method">
  
    #<strong>enable</strong>(pili_url: nil, https: nil, **options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>解除禁播流</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pili_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pili 所在服务器地址，一般无需填写</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>https</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否使用 HTTPS 协议</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>额外的 Faraday 参数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/ResourceNotFound.html" title="QiniuNg::HTTP::ResourceNotFound (class)">QiniuNg::HTTP::ResourceNotFound</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>找不到直播流</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enable'>enable</span><span class='lparen'>(</span><span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_disable'>disable</span><span class='lparen'>(</span><span class='label'>recover_until:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='id identifier rubyid_pili_url'>pili_url</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='id identifier rubyid_https'>https</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hdl_play_domain-instance_method">
  
    #<strong>hdl_play_domain</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>HDL (HTTP-FLV) 播放域名</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HDL (HTTP-FLV) 播放域名</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 290</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hdl_play_domain'>hdl_play_domain</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-hdl.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hdl_play_url-instance_method">
  
    #<strong>hdl_play_url</strong>  &#x21d2; <tt><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">URL::PlayURL</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>HDL (HTTP-FLV) 播放地址</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">URL::PlayURL</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HDL (HTTP-FLV) 播放地址</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 329</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hdl_play_url'>hdl_play_url</span>
  <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_hdl_play_domain'>hdl_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.flv</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="history_activities-instance_method">
  
    #<strong>history_activities</strong>(from: nil, to: nil, pili_url: nil, https: nil, **options)  &#x21d2; <tt>Array&lt;Array&lt;Time&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>获取直播历史记录</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>from</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>查询起始时间，如果为 nil 或不填，则表示不限制起始时间</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>to</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>查询结束时间，如果为 nil 或不填，则表示当前时间</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pili_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pili 所在服务器地址，一般无需填写</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>https</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否使用 HTTPS 协议</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>额外的 Faraday 参数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Array&lt;Time&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回一个列表，每个列表中包含一个仅有两个时间的数组，分别表示直播起始时间和结束时间。</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/ResourceNotFound.html" title="QiniuNg::HTTP::ResourceNotFound (class)">QiniuNg::HTTP::ResourceNotFound</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>找不到直播流</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180
181
182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_history_activities'>history_activities</span><span class='lparen'>(</span><span class='label'>from:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/historyactivity</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_from'>from</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='id identifier rubyid_from'>from</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>&amp;.</span><span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>end</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_to'>to</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='id identifier rubyid_to'>to</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>&amp;.</span><span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>params:</span> <span class='id identifier rubyid_params'>params</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
  <span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>items</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>end</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hls_play_domain-instance_method">
  
    #<strong>hls_play_domain</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>HLS 播放域名</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HLS 播放域名</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hls_play_domain'>hls_play_domain</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-hls.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hls_play_url-instance_method">
  
    #<strong>hls_play_url</strong>  &#x21d2; <tt><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">URL::PlayURL</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>HLS 播放地址</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">URL::PlayURL</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HLS 播放地址</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 322</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hls_play_url'>hls_play_url</span>
  <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_hls_play_domain'>hls_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.m3u8</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="live_info-instance_method">
  
    #<strong>live_info</strong>(pili_url: nil, https: nil, **options)  &#x21d2; <tt><span class='object_link'><a href="Stream/LiveInfo.html" title="QiniuNg::Streaming::Stream::LiveInfo (class)">LiveInfo</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>获取直播流实时信息</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pili_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pili 所在服务器地址，一般无需填写</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>https</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否使用 HTTPS 协议</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>额外的 Faraday 参数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Stream/LiveInfo.html" title="QiniuNg::Streaming::Stream::LiveInfo (class)">LiveInfo</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回直播流实时信息，如果该直播流并未处于直播状态，则返回 nil</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/ResourceNotFound.html" title="QiniuNg::HTTP::ResourceNotFound (class)">QiniuNg::HTTP::ResourceNotFound</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>找不到直播流</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 121</span>

<span class='kw'>def</span> <span class='id identifier rubyid_live_info'>live_info</span><span class='lparen'>(</span><span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/live</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
  <span class='const'><span class='object_link'><a href="Stream/LiveInfo.html" title="QiniuNg::Streaming::Stream::LiveInfo (class)">LiveInfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../HTTP.html" title="QiniuNg::HTTP (module)">HTTP</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../HTTP/NoData.html" title="QiniuNg::HTTP::NoData (class)">NoData</a></span></span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rtmp_play_domain-instance_method">
  
    #<strong>rtmp_play_domain</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RTMP 播放域名</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RTMP 播放域名</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 276</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rtmp_play_domain'>rtmp_play_domain</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-live-rtmp.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rtmp_play_url-instance_method">
  
    #<strong>rtmp_play_url</strong>  &#x21d2; <tt>PlayURL</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RTMP 播放地址</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>PlayURL</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RTMP 播放地址</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 315</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rtmp_play_url'>rtmp_play_url</span>
  <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rtmp</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_rtmp_play_domain'>rtmp_play_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='ivar'>@key</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rtmp_publish_domain-instance_method">
  
    #<strong>rtmp_publish_domain</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RTMP 推流域名</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RTMP 推流域名</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rtmp_publish_domain'>rtmp_publish_domain</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-publish.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rtmp_publish_url-instance_method">
  
    #<strong>rtmp_publish_url</strong>  &#x21d2; <tt><span class='object_link'><a href="URL/RTMPPublishURL.html" title="QiniuNg::Streaming::URL::RTMPPublishURL (class)">URL::RTMPPublishURL</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>RTMP 推流地址</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new_client'><span class='object_link'><a href="../../QiniuNg.html#new_client-class_method" title="QiniuNg.new_client (method)">new_client</a></span></span><span class='lparen'>(</span><span class='label'>access_key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;Qiniu AccessKey&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>secret_key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;Qiniu SecretKey&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_hub'>hub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;Hub Name&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>domain:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;Hub Domain&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_stream'>stream</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;Stream Key&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_rtmp_publish_url'>rtmp_publish_url</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="URL/RTMPPublishURL.html" title="QiniuNg::Streaming::URL::RTMPPublishURL (class)">URL::RTMPPublishURL</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RTMP 推流地址</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 308</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rtmp_publish_url'>rtmp_publish_url</span>
  <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/RTMPPublishURL.html" title="QiniuNg::Streaming::URL::RTMPPublishURL (class)">RTMPPublishURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_rtmp_publish_domain'>rtmp_publish_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='ivar'>@key</span><span class='comma'>,</span> <span class='ivar'>@auth</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_as-instance_method">
  
    #<strong>save_as</strong>(key: nil, from: nil, to: nil, format: :m3u8, pipeline: nil, notify_url: nil, expire_after_days: nil, pili_url: nil, https: nil, **options)  &#x21d2; <tt><span class='object_link'><a href="Stream/SaveAsResult.html" title="QiniuNg::Streaming::Stream::SaveAsResult (class)">SaveAsResult</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='saveas-instance_method'>saveas</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>录制直播回放</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>保存的文件名，不指定系统会随机生成</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>from</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>要保存的直播的起始时间，如果为 nil 或不填，则表示不限制起始时间</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>to</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>要保存的直播的结束时间，如果为 nil 或不填，则表示当前时间</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>format</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>保存的文件格式，默认为 m3u8，如果需要指定其他格式，将会启用异步处理</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pipeline</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>当使用异步处理时，使用的数据处理私有队列名称 <a href="https://developer.qiniu.com/kodo/manual/1206/put-policy#put-policy-persistentPipeline">参考文档</a></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>notify_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>当使用异步处理时，保存成功回调通知地址 <a href="https://developer.qiniu.com/kodo/manual/1206/put-policy#putpolicy-persistentNotifyUrl">参考文档</a></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>expire_after_days</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>文件生命周期，单位为天。默认永久保存</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pili_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pili 所在服务器地址，一般无需填写</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>https</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否使用 HTTPS 协议</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>额外的 Faraday 参数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Stream/SaveAsResult.html" title="QiniuNg::Streaming::Stream::SaveAsResult (class)">SaveAsResult</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回录制结果</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/ResourceNotFound.html" title="QiniuNg::HTTP::ResourceNotFound (class)">QiniuNg::HTTP::ResourceNotFound</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>找不到直播流</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/NoData.html" title="QiniuNg::HTTP::NoData (class)">QiniuNg::HTTP::NoData</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>该时间点上没有直播数据</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_as'>save_as</span><span class='lparen'>(</span><span class='label'>key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>from:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:m3u8</span><span class='comma'>,</span>
            <span class='label'>pipeline:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>notify_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>expire_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span>
            <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/saveas</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_req_body'>req_body</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>fname:</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>start:</span> <span class='id identifier rubyid_from'>from</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='id identifier rubyid_to'>to</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span>
    <span class='label'>pipeline:</span> <span class='id identifier rubyid_pipeline'>pipeline</span><span class='comma'>,</span> <span class='label'>notify:</span> <span class='id identifier rubyid_notify_url'>notify_url</span><span class='comma'>,</span> <span class='label'>expireDays:</span> <span class='id identifier rubyid_expire_after_days'>expire_after_days</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                                   <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                   <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req_body'>req_body</span><span class='rparen'>)</span><span class='comma'>,</span>
                                   <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
  <span class='const'><span class='object_link'><a href="Stream/SaveAsResult.html" title="QiniuNg::Streaming::Stream::SaveAsResult (class)">SaveAsResult</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_entry'>entry</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fname</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="../Processing.html" title="QiniuNg::Processing (module)">Processing</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Processing/PersistentID.html" title="QiniuNg::Processing::PersistentID (class)">PersistentID</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>persistentID</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                                 <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@http_client_v1</span><span class='rparen'>)</span><span class='comma'>,</span>
                                 <span class='ivar'>@bucket</span><span class='rparen'>)</span>
  <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="snapshot-instance_method">
  
    #<strong>snapshot</strong>(key: nil, time: nil, format: :jpg, expire_after_days: nil, delete_after_days: nil, pili_url: nil, https: nil, **options)  &#x21d2; <tt><span class='object_link'><a href="../Storage/Entry.html" title="QiniuNg::Storage::Entry (class)">QiniuNg::Storage::Entry</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>保存直播截图</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>保存的文件名，不指定系统会随机生成</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>time</span>
      
      
        <span class='type'>(<tt>Time</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>要保存截图的时间点，如果为 nil 或不填，则表示不限制起始时间</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>format</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>要保存的文件格式，默认为 JPG</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>expire_after_days</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>文件生命周期，单位为天。默认永久保存</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delete_after_days</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>与 expire_after_days 语义相同。仅使用任意一个参数即可，不必同时使用</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pili_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pili 所在服务器地址，一般无需填写</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>https</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否使用 HTTPS 协议</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>额外的 Faraday 参数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Storage/Entry.html" title="QiniuNg::Storage::Entry (class)">QiniuNg::Storage::Entry</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回录制结果文件</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/ResourceNotFound.html" title="QiniuNg::HTTP::ResourceNotFound (class)">QiniuNg::HTTP::ResourceNotFound</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>找不到直播流</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>Faraday::ClientError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>该时间点上没有视频</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255
256
257
258
259
260
261
262
263
264</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 253</span>

<span class='kw'>def</span> <span class='id identifier rubyid_snapshot'>snapshot</span><span class='lparen'>(</span><span class='label'>key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>time:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='symbol'>:jpg</span><span class='comma'>,</span> <span class='label'>expire_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>delete_after_days:</span> <span class='kw'>nil</span><span class='comma'>,</span>
             <span class='label'>pili_url:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>https:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/v2/hubs/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/streams/</span><span class='embexpr_beg'>#{</span><span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_encode64'>urlsafe_encode64</span><span class='lparen'>(</span><span class='ivar'>@key</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>/snapshot</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_req_body'>req_body</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>fname:</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>time:</span> <span class='id identifier rubyid_time'>time</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>format:</span> <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span> <span class='label'>deleteAfterDays:</span> <span class='id identifier rubyid_delete_after_days'>delete_after_days</span> <span class='op'>||</span> <span class='id identifier rubyid_expire_after_days'>expire_after_days</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='id identifier rubyid_resp_body'>resp_body</span> <span class='op'>=</span> <span class='ivar'>@http_client_v2</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_pili_url'>pili_url</span> <span class='op'>||</span> <span class='id identifier rubyid_get_pili_url'>get_pili_url</span><span class='lparen'>(</span><span class='id identifier rubyid_https'>https</span><span class='rparen'>)</span><span class='comma'>,</span>
                                   <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                                   <span class='label'>body:</span> <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_json_marshaler'><span class='object_link'><a href="../Config.html#default_json_marshaler-class_method" title="QiniuNg::Config.default_json_marshaler (method)">default_json_marshaler</a></span></span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req_body'>req_body</span><span class='rparen'>)</span><span class='comma'>,</span>
                                   <span class='op'>**</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
  <span class='ivar'>@bucket</span><span class='period'>.</span><span class='id identifier rubyid_entry'>entry</span><span class='lparen'>(</span><span class='id identifier rubyid_resp_body'>resp_body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fname</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="snapshot_domain-instance_method">
  
    #<strong>snapshot_domain</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>直播封面域名</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>直播封面域名</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


297
298
299</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 297</span>

<span class='kw'>def</span> <span class='id identifier rubyid_snapshot_domain'>snapshot_domain</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pili-snapshot.</span><span class='embexpr_beg'>#{</span><span class='ivar'>@domain</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="snapshot_url-instance_method">
  
    #<strong>snapshot_url</strong>  &#x21d2; <tt><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">URL::PlayURL</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>直播封面地址</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">URL::PlayURL</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>直播封面地址</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/streaming/stream.rb', line 336</span>

<span class='kw'>def</span> <span class='id identifier rubyid_snapshot_url'>snapshot_url</span>
  <span class='const'><span class='object_link'><a href="URL.html" title="QiniuNg::Streaming::URL (class)">URL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="URL/PlayURL.html" title="QiniuNg::Streaming::URL::PlayURL (class)">PlayURL</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_snapshot_domain'>snapshot_domain</span><span class='comma'>,</span> <span class='ivar'>@hub</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@key</span><span class='embexpr_end'>}</span><span class='tstring_content'>.jpg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Aug 20 09:58:22 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 (ruby-2.6.1).
</div>

    </div>
  </body>
</html>